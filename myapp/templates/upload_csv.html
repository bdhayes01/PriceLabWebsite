<!DOCTYPE html>
<html>
<head>
    <title>Upload Excel File</title>
</head>
<script>
        function make_cohorts() {
            fetch("{% url 'make_cohorts' %}", {
                method: "GET",  // You can use POST if needed
                headers: {
                    "X-Requested-With": "XMLHttpRequest",  // Indicates it's an AJAX request
                    "Content-Type": "application/json",
                    "X-CSRFToken": "{{ csrf_token }}"
                }
            })
            .then(response => response.json())
            .then(data => {
                // Update the page with the response data
                document.getElementById("response-message").innerText = data.message;
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    </script>
<body>
    <h2>Upload Excel File</h2>

    <!-- Display success or error message -->
    {% if message %}
        <p style="color: green;">{{ message }}</p>
    {% endif %}

    <!-- Form to upload the Excel file -->
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="file" accept=".csv" multiple>
        <button type="submit">Upload</button>
    </form>

    <br><br>
    <a href="{% url 'home' %}">
        <button>Go to Home Page</button>
    </a>

    <br><br>
    <button type="button" onclick="make_cohorts()">Make Cohorts</button>

    <br><br>
    <p id="response-message"></p>

</body>
</html>
