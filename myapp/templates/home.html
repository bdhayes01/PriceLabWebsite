<!DOCTYPE html>
<html>
<head>
    <title>Sequence List</title>
        <script>
        // Function to search and navigate with query parameter
        function searchSequence() {
            const query = document.getElementById('search').value;
            if (query) {
                window.location.href = `?q=${query}`;
            }
        }

        // Function to render the list of persons dynamically from Django template data
        function renderSequenceList() {
            const sequences = JSON.parse('{{ sequence_json|escapejs }}');  // Rendered from Django context
            const seqList = document.getElementById('sequence-list');

            if (sequences.length > 0) {
                seqList.innerHTML = '';  // Clear previous results
                sequences.forEach(function(sequence) {
                    const listItem = `<li>${sequence.Accession} is the Accession number,
${sequence.Variants} are the Variants</li>`;
                    seqList.innerHTML += listItem;
                });
            } else {
                seqList.innerHTML = '<li>No results found.</li>';
            }
        }

        // Execute renderPersonList function on page load to populate the list
        window.onload = function() {
            renderSequenceList();
        };
    </script>
</head>
<body>
    <h1>Enter Accession Number</h1>

    <!-- Search Input -->
    <input type="text" id="search" placeholder="Search by Accession number..." value="{{ query }}">
    <button onclick="searchSequence()">Search</button>

    <!-- Container for displaying the person list dynamically with JavaScript -->
    <ul id="sequence-list">
        <!-- This list will be dynamically populated by JavaScript -->
    </ul>

    <!-- Button to redirect to the upload CSV page -->
    <br><br>
    <a href="{% url 'upload_csv' %}">
        <button>Go to Upload CSV Page</button>
    </a>


</body>
</html>
